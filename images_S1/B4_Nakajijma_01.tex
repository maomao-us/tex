\input{texheder.tex}
\usepackage{setspace} % setspaceパッケージのインクルード
\usepackage{enumitem}
\usepackage{grffile}

%「Weekly Report」
\newcommand{\Weekly}[5]{
\twocolumn[
    \begin{center}
    \bf
    第 #1 回　Weekly Report\\
    \huge
    スマートフォンのスイング動作に潜在する個人特性\\
    \LARGE
    --- フルフルによる個人認証 ---\\

    \end{center}
    \begin{flushright}
        #2 月\ \ \  #3 日 \ \ \ #4 \
        #5
    \end{flushright}
    ]
}
%\setstretch{0.5} % ページ全体の行間を設定

\begin{document}

\Weekly{1}{4}{13}{(火)}{\ 中島　基晴}


\section{自己紹介}
%% 第1章 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
黒岩研配属になった新B4の中島基晴です．生まれも育ちも福井です．
これからよろしくおねがいします．
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% 第2章 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{今週までの作業内容}
\begin{itemize}
    \item Debianのインストール
\end{itemize}

ネットワーク接続の設定はDebianのインストールを行う際に，
手動でネットワークの設定を行った．

\begin{itemize}
    \item PCの環境設定
\end{itemize}

PCの環境設定では以下のことを主に順番で行った。


\begin{enumerate}
    \item ホームディレクトリの変更  %%1
    \item ホームディレクトリの所有者を自分にする  %%2
    \item ローカルユーザーで"sudo"コマンドを行えるように設定  %%3
    \item gnomeの設定  %%4
    \item apt の設定のため sources.list を編集  %%5
    \item DHCP によるネットワーク接続をやめ、自身のIPアドレスで通信するようにする  %%6
    \item IPv6 の停止  %%7
    \item acroread の設定  %%8
    \item 必要なパッケージのインストール
    \item 文字コードの設定  %%9
    \item tex ファイルをpdf化できるように設定  %%10
    \item ldap 関係の設定  %%11
    \item sshの設定\leavevmode \\  %%12
\end{enumerate}


ここで気をつけなければならないものは６つ目，８つ目，11つ目の作業である．

６つ目は /etc/network/interfaces.d というディレクトリに，
DHCP によるネットワーク接続をとめて自身のIPアドレスで通信できるようにする
ファイルを作成するのだが，一つでも書き方を誤るだけでネットに繋がらなくなる．
もう一度書き直して再起動すれば繋げることができるがこれを行っても繋がらないことがあったため，
一文字一文字確認しながら作業を行った．

８つ目は配布された資料通りに行っても Adobe Reader をインストールすることができない．
最後のインストールコマンドで「禁止されたパッケージがあります」と表示されてしまう．
この問題を解決するため， google-chrome をインストールした時と同様にネットからパッケージをダウンロード
してインストールした．

11つ目はインストールした時に設定画面に変わり，いろいろと書き込むのだが
ここで１つでも誤ると ldap アカウントにログインできなくなる．
さらにミスを犯すと /etc/libnss-ldap.conf のファイルを修正してもログイン不可能である．
よってもう一度最初からやり直さなければならない．
インストール時の設定は ldap://192.168.100.254 と記入して始まるが，表示されたときは
 ldapi:/// となっているので注意が必要であった．

以上の３つを気をつけて環境設定を行った．
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{研究}
%% 第3章 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{研究テーマの決定}

今年，私は「スマートフォンのスイング動作に潜在する個人特性 --- フルフルによる個人認証 ---」
という研究テーマで卒業研究を行う．

\subsection{研究背景}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
まず「スグアプ」というNTT docomo が提供しているサービスを紹介する．

「スグアプ」とは，スマートフォンを振ることですぐに
アプリが起動することができるドコモのオリジナル機能である．
起動アプリは変更可能で，２つまで登録できる．
手がふさがっている時などに便利なサービスであるが，
このサービスはスマホが起動している時しか作動しない．
スマホが起動していない状態から振るだけでアプリを起動できれば，
このサービスをより利便性のあるサービスになると考えた．
これを実現するには，他人が振ってもスマホが起動しないようにしなければならない．
そのためにスマートフォンのスイング動作のデータを収集し，個人特性を発見する．
これが私の研究の第１目的である．

\subsection{進行状況}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
現在，研究は次の番号順にように進めている．
\begin{enumerate}
    \item 計測
    \item Pythonでグラフ化
    \item 移動平均法でノイズの除去
    \item 平均0、分散1に正規化
    \item グラフの負の方向の極値を抽出
    \item 母平均の差の検定で有意差を確認
\end{enumerate}

\subsection{計測方法}
計測は図\ref{fig:phyphox}の「phyphox」というアプリを使用した．
このアプリはアーヘン工科大学の第2物理学研究所で作成された，
物理計測を行うためのアプリである．
様々な物理計測ができ，加速度や回転速度，
スマホに搭載されているならば磁力や圧力も計測可能である．
また，計測データをcsvファイルに変換することも可能である．
この機能を使い，計測したデータを
LINE keepに保存し自身のPCにダウンロードしたLINEからデータを取り出した．

今回は重力を含まない加速度で計測を行った．
重力を省いた理由は人以外の要因による影響を除きたかったからである．

\begin{figure}[tb]
\begin{center}
\vspace{45mm}
\includegraphics[scale=0.3]{images/phyphox.eps}
\hspace{5.0cm}
\caption{phyphox}
\label{fig:phyphox}
\end{center}
\end{figure}

\subsection{ノイズの除去}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
この計測をある２人に行ってもらい，
移動平均法でのノイズの削除を行った．
正規化の前にノイズの除去を行った理由は，正規化は脳図の影響を
受けやすいからである．

移動平均法には次の３種類がある．
\begin{itemize}
    \item 単純移動平均法
    \item 荷重移動平均法
    \item 指数移動平均法
\end{itemize}
今回は単純移動平均法を用いた．どの平均法が最適なのかはまだ調べていないので
今後の課題である．
単純移動平均法では計測データのある時刻$k$ ステップ目を中心とし，その前後の
$n$ 個データの平均値を求め，その結果を$k$ ステップの結果とする．つまり
$2n + 1$個のデータの平均値が単純移動平均での結果となる．

ここで$k$ステップ目のデータを$X(k)$，$k$ステップ目の演算結果を$Y(k)$とすると
次の式を得られる．

\begin{equation}
    Y(k) = \frac{1}{2n + 1}\sum_{i=-n}^{n}A(k + i)
    \label{eq:simple_line_1}
\end{equation}

しかしPython ではpandas のrolling メソッドがあり，これによって
単純移動平均の式を作る手間を省くことができる．
このメソッドの手法は式\ref{eq:simple_line_1}と異なり，
計測データのある時刻$k$ ステップ目を中心とし，その後ろの
$n$ 個データの平均値を求め，その結果を$k$ ステップの結果とする．
つまり$n + 1$個のデータの平均値が単純移動平均での結果となる．
以上より使用した単純移動平均の式は次の式\ref{eq:simple_line_2}になる．

\begin{equation}
    Y(k) = \frac{1}{n + 1}\sum_{i=-n}^{0}A(k + i)
    \label{eq:simple_line_2}
\end{equation}
このままでは平均前のデータの先頭要素$n$個が平均化できない．
この問題はrolling メソッドを設定することで，その要素とその要素より前のすべての要素を平均し，
これを結果とする．つまり一番先頭の要素はそのままの値，2番目の要素は1番目の要素との平均値が
変化後の値である．

\subsection{正規化}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
ノイズ除去の後は正規化である．
正規化を行った理由は，検定を行うために
母分散が等しくなければならないからである．
また，正規化前のデータ$X$ の平均値を$\mu$，正規化前の標準偏差を
$\sigma$ とおくと，正規化後のデータ$Y$ の$k$ ステップ目の値は次の
式で得られる．

\begin{equation}
    Y(k) = \frac{X(k) - \mu}{\sigma}
    \label{eq:seikika}
\end{equation}

\subsection{グラフの負の方向の極値を抽出}

今回の計測では条件を揃えるため2人共右手で計測を行った．
この時にスマホの画面は顔の方を向いている．
次に図\ref{fig:sumaho}を見ていただきたい．

\begin{figure}[tb]
\begin{center}
\vspace{45mm}
\includegraphics[scale=0.6]{images/sumaho.eps}
\hspace{3.0cm}
\caption{スマホの加速度の方向}
\label{fig:sumaho}
\end{center}
\end{figure}
これはスマホに搭載されている加速度センサーの方向を表している．
スマホの画面は顔側に向いているので振った時に加速度は負の方向に向かう．
そしてスマホを振り切った時に加速度は最大になり，その後正の方向に
加速するので振り切った直後が極小値になる．
この研究ではこの極小値に個人特性が現れるかを確かめる．
計測の条件として今回は腕振りを3回にしているので，2人の3つ分の極小値を抽出する．

\subsection{母平均の差の検定で有意差を確認}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

最後に母平均の差の検定の検定を行う．
この検定は異なるサンプル数の標本を検定することができる．
今回は2人とも同数のサンプル数だが，今後も同じサンプル数で行うとは限らないので
この検定を行った．
それぞれの大きさ$m$，$n$の任意標本$X$，$Y$を抽出した時，次の式\ref{eq:kentei}は
自由度$(m + n - 2)$のt分布に従う．

\begin{equation}
    \frac{\bar{X} - \bar{Y} - (\mu_1 - \mu_2)}{\sqrt{(\frac{1}{m} + \frac{1}{n})S^2}}
    \label{eq:kentei}
\end{equation}
ここで
\begin{equation}
    S^2 = \frac{(m - 1)S_1^2 + (n - 1)S_2^2 }{n + n - 2}
    \label{eq:kentei}
\end{equation}
$\bar{X}$と$\bar{Y}$は標本平均，$S_1^2$と$S_2^2$は標本分散を表す．
抽出したサンプル数$n$個の任意標本$X$とすると，標本平均と標本分散はそれぞれ
次の式\ref{eq:heikin}，式\ref{eq:bunsan}で表すことができる．

\begin{equation}
    \bar{X} = \frac{1}{n}\sum_{i=1}^{n}X_i
    \label{eq:heikin}
\end{equation}

\begin{equation}
    S^2 = \frac{1}{n - 1}\sum_{i=1}^{n}(X_i - \bar{X})^2
    \label{eq:bunsan}
\end{equation}

抽出するサンプル数はそれぞれ3つずつなので，式\ref{eq:kentei}は
自由度4のt分布に従う．
2群の母平均$\mu_1，\mu_2$は等しいという仮説$H_o$を立て，
両側検定で行い，有意水準$\alpha = 0.05$パーセントとするとその棄却域は

\begin{equation}
    t_{m + n - 2}(\frac{\alpha}{2}) = t_4(0.025) = 2.776
    \label{eq:kikyaku}
\end{equation}
この時，検定統計量$T \simeq 3.06$となり，$2.776 < 3.06$と棄却域に入るので
仮説$H_o$が棄却され，有意差が存在することが判明した．

\subsection{まとめ}
今回の実験では有意差が見られたが，今後の計測データすべてに有意差があるかは
まだ分からない．また，$\frac{\alpha}{2} = 1$の場合は$t_4(0.01) = 3.747$と棄却域
に入らないのでさらなる精度を求めるのならば加速度とは違う計測データを取得することも
考えなければならない．更に今回は$x$成分だけで行い，残り２つの成分$y$成分と$z$成分では
検定を行わなかった．
$y$成分と$z$成分でも有意差が見られるかを検証していきたい．
他にも検定方法の見直しとすべきことはいろいろとある．

\section{今後の予定}
\begin{itemize}
    \item 小松哲幸さんの論文を始め，小松哲幸さんが参考にした参考文献も読む．
    \item 最適な移動平均法の模索
    \item $y$成分と$z$成分でも有意差が見られるかを検証
    \item どの物理計測からより良いデータを抽出できるかを模索．
    \item 他に検定方法がないかを調べる．
\end{itemize}

\section{参考文献}
    [1] UbuntuにAdobe Acrobat Readerを入れる : LIFE IS MIRACLE WIND 地球の未来にご奉仕する研究人のblog https://life-is-miracle-wind.blog.jp/archives/26509795.html \\

    [2] スグアプ スマホを振るだけでスグにアプリが起動するドコモのオリジナル機能! https://onlineshop.smt.docomo.ne.jp/special/suguap\\
    u/index.html?icid=OLS_SP_suguapu_from_SP_new_mode\\
    l_2020_2nd \\

    [3] Formid Apps https://jp.formidapps.com/ios/app.phyphox-xzzjnnnD.aspx\\

    [4] phyphox – Physical Phone Experiments https://phyphox.org/\\

    [5] データの正規化（最大値・最小値バージョン、平均・分散バージョン）https://mathwords.net/dataseikika\\

    [6] スマートフォンの加速度センサについて | SmartDrive Blog https://blog.smartdrive.co.jp/b548607cc5ad/\\

    [7] 石村園子．すぐわかる確率・統計．pp.170，198，220.\\
\end{document}